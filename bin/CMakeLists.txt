PROJECT(dwg2ansysBin)

INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${dwg2ansysLib_SOURCE_DIR}
)

SET(dwg2ansysBinSrcs
  main.cxx
)

IF(WIN32)
  SET(WIN_VERSION ${CMAKE_CURRENT_BINARY_DIR}/dwg2ansysVersion.rc)
  CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/dwg2ansysVersion.rc.in ${WIN_VERSION} @ONLY IMMEDIATE)
  SOURCE_GROUP("Resources" FILES ${WIN_VERSION} )
ENDIF(WIN32)
CONFIGURE_FILE(${dwg2ansys_SOURCE_DIR}/icon.ico ${CMAKE_CURRENT_BINARY_DIR}/icon.ico COPYONLY)

ADD_EXECUTABLE(dwg2ansysBin ${dwg2ansysBinSrcs} ${WIN_VERSION})

TARGET_LINK_LIBRARIES(dwg2ansysBin
  dwg2ansysLib
)

SET_TARGET_PROPERTIES(dwg2ansysBin PROPERTIES
  VERSION "${dwg2ansys_MAJOR_VERSION}.${dwg2ansys_MINOR_VERSION}"
  SOVERSION "${dwg2ansys_MAJOR_VERSION}.${dwg2ansys_MINOR_VERSION}"
)

INSTALL(TARGETS dwg2ansysBin
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
)
